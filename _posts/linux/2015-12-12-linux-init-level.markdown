---
layout: article
title:  "linux的运行级别"
date:   2015-12-12 09:20:00 +0800
categories: linux
---

标准的linux运行级为3或者5（我都用3，在刚开始学的时候用5，不过最好还是3，起码启动的进程少，不浪费系统资源），如果是3的话，系统就在多用户状态。如果是5的话，则是运行着X Window 系统。如果目前正在3或5，而你把运行级降低到2的话，init就会执行K45named脚本
。
不同的运行级定义如下：(可以参考Red Hat linux里面的/etc/inittab）

Linux系统有7个运行级别(runlevel)

	0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动
	1：单用户工作状态，root权限，用于系统维护，禁止远程登陆
	2：多用户状态(没有NFS)
	3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式
	4：系统未使用，保留（一般不用，在一些特殊情况下可以用它来做一些事情。例如在笔记本电脑的电池用尽时，可以切换到这个模式来做一些设置。）
	5：X11控制台，登陆后进入图形GUI模式
	6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动

----------

运行级别的原理：

1。在目录/etc/rc.d/init.d下有许多服务器脚本程序，一般称为服务(service)

2。在/etc/rc.d下有7个名为rcN.d的目录，对应系统的7个运行级别

3。rcN.d目录下都是一些符号链接文件，这些链接文件都指向init.d目录下的service脚本文件，命名规则为K+nn+服务名或S+nn+服务名，其中nn为两位数字。

4。系统会根据指定的运行级别进入对应的rcN.d目录，并按照文件名顺序检索目录下的链接文件

     对于以K开头的文件，系统将终止对应的服务
     对于以S开头的文件，系统将启动对应的服务

5。查看运行级别用：runlevel

6。进入其它运行级别用：init N

7。另外init0为关机，init 6为重启系统

----------

由于现在的Linux系统安装完后就运行在第5个级别，即系统启动后直接进入图形界面，而不用在字符模式下登录后用startx或者xinit 来起动图形界面。建议在系统安装完成后把系统的默认运行等级设置在第3级，在字符终端登录后，再手工输入startx 命令起动图形界面。以用如下的方法修改：

用文本编辑器修改 `/etc/inittab`文件，把
代码:

id:5:initdefault:这一行，修改成

代码:

id:3:initdefault:

保存后就reboot重起，系统就默认起动到字符界面。不同运行级别之间的 差别的在于系统默认起动的服务的不同，如运行级别3默认不启动X图形界面服务，而运行级别5 却默认起动。本质上是没有区别的，更无所谓不同级别间功能强弱的问题。用户完全可自给定义不同级别的默认服务。在任何运行级别，用户都可用init 命令来切换到其他运行级别